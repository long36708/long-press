import{_ as t,a as p,b as i}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.BCVHfIj7.js";import{_ as l,c as r,I as e,a7 as d,o}from"./chunks/framework.DGCt2JJv.js";import"./chunks/dayjs.min.DZyl58SH.js";const v=JSON.parse('{"title":"Tree组件","description":"","frontmatter":{},"headers":[],"relativePath":"react/Antd使用踩坑经验汇总/Tree组件.md","filePath":"react/Antd使用踩坑经验汇总/Tree组件.md","lastUpdated":1713718044000}'),c={name:"react/Antd使用踩坑经验汇总/Tree组件.md"},h=d(`<h1 id="tree组件" tabindex="-1">Tree组件 <a class="header-anchor" href="#tree组件" aria-label="Permalink to &quot;Tree组件&quot;">​</a></h1><h2 id="tree组件无法点击三角形展开收缩" tabindex="-1">tree组件无法点击三角形展开收缩 <a class="header-anchor" href="#tree组件无法点击三角形展开收缩" aria-label="Permalink to &quot;tree组件无法点击三角形展开收缩&quot;">​</a></h2><p>原因：没有给数组设置key字段</p><p>也可以fieldNames 自定义节点 title、key、children 的字段</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#0070C1;--shiki-dark:#E5C07B;"> treeFieldNames</span><span style="--shiki-light:#000000;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#E06C75;">	title</span><span style="--shiki-light:#001080;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> &quot;title&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#E06C75;">	key</span><span style="--shiki-light:#001080;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> &quot;id&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#E06C75;">	children</span><span style="--shiki-light:#001080;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> &quot;children&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="使用expandedkeys属性和onexpand事件进行数据的可控操作" tabindex="-1">使用expandedKeys属性和onExpand事件进行数据的可控操作 <a class="header-anchor" href="#使用expandedkeys属性和onexpand事件进行数据的可控操作" aria-label="Permalink to &quot;使用expandedKeys属性和onExpand事件进行数据的可控操作&quot;">​</a></h2><p>Tree中的api属性有一个defaultExpandAll</p><p>这个属性只在第一次渲染的时候有效，也就是说用户刷新页面后或者在这个页面操作完这个组件后重新渲染的时候，这个值将不会有效。</p><p>解决办法：</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>expandedKeys={help.treeIdData}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>onExpand={this.onExpand}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用expandedKeys属性和onExpand事件进行数据的可控操作</p><p>初始化的时候获取所有的TreeKeysr然后将它设置到expandedKeys属性上，当用户操作Tree节点的时候再触发onExpand更新expandedKeys数据</p><p>具体思路参考 <a href="https://reactjs.org/docs/forms.html" target="_blank" rel="noreferrer">https://reactjs.org/docs/forms.html</a> 或者 <a href="https://github.com/ant-design/ant-design/issues/4145#issuecomment-27058096" target="_blank" rel="noreferrer">https://github.com/ant-design/ant-design/issues/4145#issuecomment-27058096</a></p><p>一般不会使用defaultCheckedKeys和defaultExpandedKeys,要实现业务要求，需要expandedKeys和onExpand、checkedKeys和onCheck结合使用。</p><p>需要注意： expandedKeys 的类型也很重要，比如下面key是number类型, expandedKeys也必须是数字expandedKeys=[1,2]，如果是这样expandedKeys=[&quot;1&quot;,&quot;2&quot;]也不会生效</p><h2 id="设置了treedata为什么无法渲染" tabindex="-1">设置了treeData为什么无法渲染？ <a class="header-anchor" href="#设置了treedata为什么无法渲染" aria-label="Permalink to &quot;设置了treeData为什么无法渲染？&quot;">​</a></h2><p>原因：异步原因。 需要给tree组件添加如下逻辑：</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span> {</span></span>
<span class="line"><span>  treeData.length &gt; 0 ? (</span></span>
<span class="line"><span>    &lt;Tree</span></span>
<span class="line"><span>        blockNode</span></span>
<span class="line"><span>        treeData={treeData}</span></span>
<span class="line"><span>    &gt;</span></span>
<span class="line"><span>    &lt;/Tree&gt;</span></span>
<span class="line"><span>   ) : null</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="antd-v4-tree组件展开treenode出现内容溢出部分变化闪烁" tabindex="-1">antd v4 Tree组件展开TreeNode出现内容溢出部分变化闪烁 <a class="header-anchor" href="#antd-v4-tree组件展开treenode出现内容溢出部分变化闪烁" aria-label="Permalink to &quot;antd v4 Tree组件展开TreeNode出现内容溢出部分变化闪烁&quot;">​</a></h2><p><a href="https://www.lanwuyaojiu.cn/blogm/blogart-85.html" target="_blank" rel="noreferrer">https://www.lanwuyaojiu.cn/blogm/blogart-85.html</a> 解决方法，给中间内容加上一个固定的宽度，然后设置文本隐藏属性，且不能使用 百分比单位 和 calc(100% - 20px)等响应单位。修改JS和CSS。</p><h2 id="checkable勾选-selectable点击选中" tabindex="-1">checkable勾选 selectable点击选中 <a class="header-anchor" href="#checkable勾选-selectable点击选中" aria-label="Permalink to &quot;checkable勾选 selectable点击选中&quot;">​</a></h2><p>同时设置 checkable=true和 selectable=true时</p><p>只能点击复选框切换勾选，不可点击label切换勾选</p><p>仅设置chectable=true，selectable=false时， 既可点击复选框切换勾选，又可点击label切换勾选</p><p>设置disabled=true时，无论checkable=true和 selectable=true，均无法勾选</p><h2 id="contributors" tabindex="-1">Contributors <a class="header-anchor" href="#contributors" aria-label="Permalink to &quot;Contributors&quot;">​</a></h2>`,26);function b(u,k,m,g,y,x){const a=t,s=p,n=i;return o(),r("div",null,[h,e(a,{readTime:"1",words:"509"}),e(s),e(n)])}const C=l(c,[["render",b]]);export{v as __pageData,C as default};
