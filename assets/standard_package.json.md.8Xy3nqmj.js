import{_ as p,a as l,b as i}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.BCVHfIj7.js";import{_ as r,c,I as n,a7 as o,o as t}from"./chunks/framework.DGCt2JJv.js";import"./chunks/dayjs.min.DZyl58SH.js";const C=JSON.parse('{"title":"package.json çš„ç‰ˆæœ¬å·","description":"","frontmatter":{},"headers":[],"relativePath":"standard/package.json.md","filePath":"standard/package.json.md","lastUpdated":1713718044000}'),b={name:"standard/package.json.md"},u=o(`<h1 id="package-json-çš„ç‰ˆæœ¬å·" tabindex="-1">package.json çš„ç‰ˆæœ¬å· <a class="header-anchor" href="#package-json-çš„ç‰ˆæœ¬å·" aria-label="Permalink to &quot;package.json çš„ç‰ˆæœ¬å·&quot;">â€‹</a></h1><h1 id="ç»„æˆéƒ¨åˆ†" tabindex="-1">ç»„æˆéƒ¨åˆ† <a class="header-anchor" href="#ç»„æˆéƒ¨åˆ†" aria-label="Permalink to &quot;ç»„æˆéƒ¨åˆ†&quot;">â€‹</a></h1><p>(1)ã€ç¬¬ä¸€éƒ¨åˆ†ä¸ºä¸»ç‰ˆæœ¬å·ï¼Œå˜åŒ–äº†æœ‰äº†ä¸€ä¸ªä¸å…¼å®¹ä¸Šä¸ªç‰ˆæœ¬çš„å¤§æ›´æ”¹ã€‚ (2)ã€ç¬¬äºŒéƒ¨åˆ†ä¸ºæ¬¡ç‰ˆæœ¬å·ï¼Œå˜åŒ–äº†è¡¨ç¤ºå¢åŠ äº†æ–°åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥å‘åå…¼å®¹ã€‚ (3)ã€ç¬¬ä¸‰éƒ¨åˆ†ä¸ºä¿®è®¢ç‰ˆæœ¬å·ï¼Œå˜åŒ–äº†è¡¨ç¤ºæœ‰bugä¿®å¤ï¼Œå¹¶ä¸”å¯ä»¥å‘åå…¼å®¹ã€‚ (4)ã€ç¬¬å››éƒ¨åˆ†ä¸ºæ—¥æœŸç‰ˆæœ¬å·å’Œå¸Œè…Šå­—æ¯ç‰ˆæœ¬å·ï¼Œå¸Œè…Šå­—æ¯ç‰ˆæœ¬å·å…±æœ‰äº”ç§ï¼Œåˆ†ä¸º baseã€alphaã€betaã€RCã€release</p><p>æ€»ç»“</p><p>paceage.jsonæ–‡ä»¶ä¸­åŒ…å«ç‰ˆæœ¬ï¼Œè§£æåœ°å€ï¼Œä¾èµ–ä¿¡æ¯ç­‰ç­‰ï¼Œå› æ­¤å½“æˆ‘ä»¬é‡æ–°æ‰§è¡Œ npm install çš„æ—¶å€™ï¼Œnodeä»package.json ä¸­è¯»å–åˆ°äº†å„ä¸ªä¾èµ–åŒ…çš„åç§°ï¼Œç„¶åå¦‚æœå­˜åœ¨package-lock.jsonæ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šä»package-lock.jsonæ–‡ä»¶ä¸­è·å–ç‰ˆæœ¬å·ï¼Œå†è¿›è¡Œä¸‹è½½æˆ–è€…æ›´æ–°;</p><h1 id="ç›¸å…³åœ°å€" tabindex="-1">ç›¸å…³åœ°å€ <a class="header-anchor" href="#ç›¸å…³åœ°å€" aria-label="Permalink to &quot;ç›¸å…³åœ°å€&quot;">â€‹</a></h1><p><a href="https://docs.npmjs.com/about-semantic-versioning" target="_blank" rel="noreferrer">https://docs.npmjs.com/about-semantic-versioning</a></p><p><a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noreferrer">https://semver.org/lang/zh-CN/</a></p><h2 id="å¦‚ä½•è‡ªåŠ¨æ›´æ–°package-json-çš„ç‰ˆæœ¬å·å‘¢" tabindex="-1">å¦‚ä½•è‡ªåŠ¨æ›´æ–°package.json çš„ç‰ˆæœ¬å·å‘¢ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•è‡ªåŠ¨æ›´æ–°package-json-çš„ç‰ˆæœ¬å·å‘¢" aria-label="Permalink to &quot;å¦‚ä½•è‡ªåŠ¨æ›´æ–°package.json çš„ç‰ˆæœ¬å·å‘¢ï¼Ÿ&quot;">â€‹</a></h2><p>è¦è‡ªåŠ¨æ›´æ–° package.json æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å· å®‰è£… npm ï¼šç¡®ä¿ä½ å·²ç»å®‰è£…äº† Node.js å’Œ npmï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç®¡ç† JavaScript é¡¹ç›®å’ŒåŒ…ä¾èµ–çš„å·¥å…·ã€‚</p><p>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npm install -g npm-version-bump</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è‡ªåŠ¨å¢åŠ ç‰ˆæœ¬å·ï¼š</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npm version [&lt;newversion&gt; | major | minor | patch] [-m &lt;commit message&gt;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="ä¾‹å­" tabindex="-1">ä¾‹å­ <a class="header-anchor" href="#ä¾‹å­" aria-label="Permalink to &quot;ä¾‹å­&quot;">â€‹</a></h3><ul><li>ä¾‹å¦‚ï¼Œè¦å°†ç‰ˆæœ¬å·å¢åŠ åˆ° 1.0.1ï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npm version patch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>ä¾‹å¦‚ä» 1.0.1 å¢åŠ åˆ° 2.0.0ã€‚</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npm version major</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>ä¾‹å¦‚ä» 1.0.1 å¢åŠ åˆ° 1.1.0</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npm version minor</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h1 id="changesets-cli-monorepoé¡¹ç›®å‘åŒ…å·¥å…·" tabindex="-1">@changesets/cli - Monorepoé¡¹ç›®å‘åŒ…å·¥å…· <a class="header-anchor" href="#changesets-cli-monorepoé¡¹ç›®å‘åŒ…å·¥å…·" aria-label="Permalink to &quot;@changesets/cli - Monorepoé¡¹ç›®å‘åŒ…å·¥å…·&quot;">â€‹</a></h1><h2 id="æ·»åŠ å˜æ›´é›†å·¥å…·" tabindex="-1">æ·»åŠ å˜æ›´é›†å·¥å…· <a class="header-anchor" href="#æ·»åŠ å˜æ›´é›†å·¥å…·" aria-label="Permalink to &quot;æ·»åŠ å˜æ›´é›†å·¥å…·&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npm install @changesets/cli &amp;&amp; npx changeset init</span></span>
<span class="line"><span></span></span>
<span class="line"><span>yarn add @changesets/cli &amp;&amp; yarn changeset init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="æ·»åŠ å˜æ›´é›†" tabindex="-1">æ·»åŠ å˜æ›´é›† <a class="header-anchor" href="#æ·»åŠ å˜æ›´é›†" aria-label="Permalink to &quot;æ·»åŠ å˜æ›´é›†&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>npx changeset</span></span>
<span class="line"><span></span></span>
<span class="line"><span>yarn changeset</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒ" tabindex="-1">ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒ <a class="header-anchor" href="#ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒ" aria-label="Permalink to &quot;ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒ&quot;">â€‹</a></h2><p>yarn changeset version</p><p>è¿™å°†ä½¿ç”¨æ‰€æœ‰å˜æ›´é›†ï¼Œå¹¶æ ¹æ®è¿™äº›å˜æ›´é›†æ›´æ–°åˆ°æœ€åˆé€‚çš„ semver ç‰ˆæœ¬ã€‚å®ƒè¿˜ä¸ºæ¯ä¸ªä½¿ç”¨çš„å˜æ›´é›†å†™å…¥å˜æ›´æ—¥å¿—æ¡ç›®ã€‚</p><p>yarn changeset publish è¿™å°†åœ¨æ¯ä¸ªåŒ…ä¸­è¿è¡Œ npm publishï¼Œè¯¥åŒ…çš„ç‰ˆæœ¬é«˜äºå½“å‰åœ¨ npm ä¸Šåˆ—å‡ºçš„åŒ…ã€‚</p><h2 id="no-git-tag-è·³è¿‡æ‰“æ ‡ç­¾" tabindex="-1">--no-git-tag è·³è¿‡æ‰“æ ‡ç­¾ <a class="header-anchor" href="#no-git-tag-è·³è¿‡æ‰“æ ‡ç­¾" aria-label="Permalink to &quot;--no-git-tag è·³è¿‡æ‰“æ ‡ç­¾&quot;">â€‹</a></h2><p>å½“æ‚¨è¿è¡Œ<code>changeset publish --no-git-tag --snapshot</code>æ—¶ï¼Œå˜æ›´é›†å°†è·³è¿‡ä¸ºå·²å‘å¸ƒçš„å¿«ç…§åŒ…åˆ›å»º git æ ‡è®°ã€‚è¿™æ„å‘³ç€åœ¨æ¨é€ç¨³å®šç‰ˆæœ¬æ—¶ä»ç„¶å¯ä»¥åˆ›å»º git æ ‡ç­¾ï¼ˆä½¿ç”¨å¸¸è§„<code>changeset publish</code>ç‰ˆæœ¬ï¼‰ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥å®‰å…¨åœ°åœ¨æœ¬åœ°å‘å¸ƒå¿«ç…§ç‰ˆæœ¬ï¼Œè€Œæ— éœ€åˆ›å»ºä¸å¿…è¦çš„æ ‡ç­¾ã€‚</p><h2 id="ã€-changesets-cliã€‘å˜æ›´é›†å®æˆ˜æ•™ç¨‹" tabindex="-1">ã€@changesets/cliã€‘å˜æ›´é›†å®æˆ˜æ•™ç¨‹ <a class="header-anchor" href="#ã€-changesets-cliã€‘å˜æ›´é›†å®æˆ˜æ•™ç¨‹" aria-label="Permalink to &quot;ã€@changesets/cliã€‘å˜æ›´é›†å®æˆ˜æ•™ç¨‹&quot;">â€‹</a></h2><p><a href="https://blog.csdn.net/bobo789456123/article/details/137018577?spm=1001.2014.3001.5502" target="_blank" rel="noreferrer">https://blog.csdn.net/bobo789456123/article/details/137018577?spm=1001.2014.3001.5502</a></p><h2 id="np" tabindex="-1">np <a class="header-anchor" href="#np" aria-label="Permalink to &quot;np&quot;">â€‹</a></h2><p>A better<code>npm publish</code></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>&quot;prepublishOnly&quot;: &quot;npm run build&quot;,</span></span>
<span class="line"><span>&quot;release&quot;: &quot;np --no-cleanup --no-tests --any-branch&quot;,</span></span>
<span class="line"><span>&quot;deploy-component&quot;: &quot;np --any-branch&quot;,</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>&quot;np&quot;: &quot;^7.5.0&quot;,</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>&quot;publishConfig&quot;: {</span></span>
<span class="line"><span>  &quot;access&quot;: &quot;public&quot;,</span></span>
<span class="line"><span>  &quot;registry&quot;: &quot;https://registry.npmjs.org/&quot;</span></span>
<span class="line"><span>},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>&quot;files&quot;: [</span></span>
<span class="line"><span>  &quot;lib&quot;,</span></span>
<span class="line"><span>  &quot;esm&quot;</span></span>
<span class="line"><span>],</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="npm-install-np-g-è¿™ä¸ªnpåŒ…çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹-è¯·æè¿°" tabindex="-1">npm install np -g è¿™ä¸ªnpåŒ…çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œè¯·æè¿° <a class="header-anchor" href="#npm-install-np-g-è¿™ä¸ªnpåŒ…çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹-è¯·æè¿°" aria-label="Permalink to &quot;npm install np -g è¿™ä¸ªnpåŒ…çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œè¯·æè¿°&quot;">â€‹</a></h3><p><code>npm install np -g</code> è¿™æ¡å‘½ä»¤æ˜¯ç”¨æ¥å…¨å±€å®‰è£…åä¸º <code>np</code> çš„ npm åŒ…ã€‚<code>np</code> æ˜¯ä¸€ä¸ªè¾…åŠ©å·¥å…·ï¼Œç”¨äºç®€åŒ– Node.js åŒ…ï¼ˆå°¤å…¶æ˜¯é‚£äº›å‘å¸ƒåˆ° npm registry çš„åŒ…ï¼‰çš„å‘å¸ƒè¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>np</code> åŒ…æ—¶éœ€è¦æ³¨æ„çš„å‡ ä¸ªäº‹é¡¹ï¼š</p><ol><li><p><strong>æƒé™è¦æ±‚</strong>ï¼š</p><ul><li><strong>ä½¿ç”¨ <code>-g</code> é€‰é¡¹</strong>ï¼šç”±äºå‘½ä»¤ä¸­åŒ…å«äº† <code>-g</code>ï¼ˆå…¨å±€ï¼‰æ ‡å¿—ï¼Œè¿™æ„å‘³ç€ <code>np</code> å°†è¢«å®‰è£…åˆ°å…¨å±€ npm ç›®å½•ä¸­ï¼Œé€šå¸¸éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ <code>sudo</code>ï¼ˆUnix/Linux/macOSï¼‰æˆ–ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼ˆWindowsï¼‰æ¥æ‰§è¡Œå®‰è£…ã€‚</li></ul></li><li><p><strong>ç‰ˆæœ¬å…¼å®¹æ€§</strong>ï¼š</p><ul><li><strong>Node.js å’Œ npm ç‰ˆæœ¬</strong>ï¼šç¡®ä¿ä½ çš„ç³»ç»Ÿä¸­å®‰è£…äº†ä¸ <code>np</code> å…¼å®¹çš„ Node.js å’Œ npm ç‰ˆæœ¬ã€‚å¯ä»¥åœ¨ <code>np</code> çš„å®˜æ–¹æ–‡æ¡£æˆ– GitHub é¡µé¢æŸ¥çœ‹å…¶å¯¹ç¯å¢ƒç‰ˆæœ¬çš„è¦æ±‚ã€‚é€šå¸¸ï¼Œä¿æŒ Node.js å’Œ npm çš„æ›´æ–°å¯ä»¥é¿å…å…¼å®¹æ€§é—®é¢˜ã€‚</li></ul></li><li><p><strong>æ›¿ä»£ <code>npm publish</code></strong>ï¼š</p><ul><li><strong>å‘å¸ƒæµç¨‹</strong>ï¼š<code>np</code> æ˜¯ <code>npm publish</code> å‘½ä»¤çš„ä¸€ä¸ªå°è£…å’Œå¢å¼ºï¼Œå®ƒæä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–ä¸”å¯é…ç½®çš„å‘å¸ƒæµç¨‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šè‡ªåŠ¨æ‰§è¡Œ <code>prepublish</code>ã€<code>prepare</code>ã€<code>test</code> ç­‰ç”Ÿå‘½å‘¨æœŸè„šæœ¬ï¼Œæ£€æŸ¥ package.json æ–‡ä»¶å®Œæ•´æ€§ï¼Œç”Ÿæˆ changelogï¼Œæäº¤ç‰ˆæœ¬æ›´æ–°åˆ° Gitï¼Œæ‰“æ ‡ç­¾ï¼Œæœ€åæ‰æ‰§è¡Œ <code>npm publish</code> å‘å¸ƒåˆ° npm registryã€‚ä½¿ç”¨ <code>np</code> å‘å¸ƒæ—¶ï¼Œé€šå¸¸ä¸å†éœ€è¦ç›´æ¥è¿è¡Œ <code>npm publish</code>ã€‚</li></ul></li><li><p><strong>é…ç½®ä¸ä¸ªæ€§åŒ–</strong>ï¼š</p><ul><li><strong><code>.npmrc</code> å’Œ <code>package.json</code></strong>ï¼š<code>np</code> ä¼šè¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.npmrc</code> å’Œ <code>package.json</code> æ–‡ä»¶æ¥è·å–å‘å¸ƒé…ç½®ã€‚ç¡®ä¿è¿™äº›æ–‡ä»¶ä¸­çš„ <code>name</code>ã€<code>version</code>ã€<code>repository</code>ã€<code>files</code>ã€<code>scripts</code> ç­‰å­—æ®µæ­£ç¡®æ— è¯¯ï¼Œç‰¹åˆ«æ˜¯ <code>publishConfig</code> å­—æ®µï¼Œå¯èƒ½åŒ…å«å‘å¸ƒåˆ°ç§æœ‰ registry çš„é…ç½®ã€‚</li></ul></li><li><p><strong>Git å·¥ä½œæµé›†æˆ</strong>ï¼š</p><ul><li><strong>Git çŠ¶æ€</strong>ï¼šåœ¨ä½¿ç”¨ <code>np</code> å‘å¸ƒå‰ï¼Œç¡®ä¿ä½ çš„ Git å·¥ä½œåŒºæ˜¯å¹²å‡€çš„ï¼ˆæ— æœªæäº¤çš„æ›´æ”¹ï¼‰ï¼Œå¹¶ä¸”å¤„äºæ­£ç¡®çš„åˆ†æ”¯ï¼ˆé€šå¸¸ä¸º <code>master</code> æˆ– <code>main</code>ï¼‰ã€‚<code>np</code> é€šå¸¸ä¼šåœ¨å‘å¸ƒè¿‡ç¨‹ä¸­è‡ªåŠ¨æäº¤æ›´æ”¹ã€æ‰“æ ‡ç­¾å¹¶æ¨é€è‡³è¿œç¨‹ä»“åº“ã€‚</li></ul></li><li><p><strong>ç¡®è®¤å‘å¸ƒæ„å›¾</strong>ï¼š</p><ul><li><strong>ç¡®è®¤æç¤º</strong>ï¼š<code>np</code> åœ¨å‘å¸ƒè¿‡ç¨‹ä¸­ä¼šæä¾›äº¤äº’å¼çš„ç¡®è®¤æç¤ºï¼Œç¡®ä¿ä½ äº†è§£å³å°†è¿›è¡Œçš„æ“ä½œã€‚ä»”ç»†é˜…è¯»å¹¶ç¡®è®¤æç¤ºä¿¡æ¯ï¼Œé¿å…è¯¯æ“ä½œå¯¼è‡´ä¸å¿…è¦çš„å‘å¸ƒã€‚</li></ul></li><li><p><strong>éµå¾ª SemVer</strong>ï¼š</p><ul><li><strong>ç‰ˆæœ¬å·ç®¡ç†</strong>ï¼š<code>np</code> å»ºè®®éµå¾ª Semantic Versioningï¼ˆSemVerï¼‰åŸåˆ™ç®¡ç†ç‰ˆæœ¬å·ã€‚åœ¨å‘å¸ƒæ—¶ï¼Œæ ¹æ®æ›´æ–°å†…å®¹é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬å·å¢é‡ï¼ˆmajorã€minorã€patchï¼‰ï¼Œç¡®ä¿ç‰ˆæœ¬å‡çº§å¯¹ä¸‹æ¸¸ä½¿ç”¨è€…çš„å½±å“æ¸…æ™°å¯é¢„æœŸã€‚</li></ul></li><li><p><strong>æ›´æ–°ä¾èµ–</strong>ï¼š</p><ul><li><strong>ä¾èµ–æ›´æ–°</strong>ï¼šå¦‚æœä½ çš„åŒ…æœ‰ä¾èµ–å…¶ä»–åº“ï¼Œç¡®ä¿åœ¨å‘å¸ƒå‰å·²æ›´æ–°ç›¸å…³ä¾èµ–è‡³æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼Œå¹¶åœ¨ <code>package.json</code> ä¸­è®°å½•æ­£ç¡®çš„ä¾èµ–ç‰ˆæœ¬èŒƒå›´ã€‚<code>np</code> å¯èƒ½ä¼šæ£€æŸ¥ä¾èµ–é¡¹å¹¶ç»™å‡ºå»ºè®®ï¼Œä½†æœ€ç»ˆè´£ä»»åœ¨äºå¼€å‘è€…ã€‚</li></ul></li></ol><p>æ€»ç»“æ¥è¯´ï¼Œä½¿ç”¨ <code>np</code> åŒ…è¿›è¡Œ Node.js åŒ…å‘å¸ƒæ—¶ï¼Œéœ€è¦æ³¨æ„æƒé™è¦æ±‚ã€ç¯å¢ƒå…¼å®¹æ€§ã€é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§ã€Git å·¥ä½œæµçš„æ•´åˆã€å‘å¸ƒæ„å›¾çš„ç¡®è®¤ã€éµå¾ª SemVer ç‰ˆæœ¬ç®¡ç†åŸåˆ™ä»¥åŠä¾èµ–é¡¹çš„æ›´æ–°ã€‚éµå¾ªè¿™äº›æ³¨æ„äº‹é¡¹ï¼Œå¯ä»¥ç¡®ä¿ä½¿ç”¨ <code>np</code> é¡ºåˆ©ä¸”æœ‰æ•ˆåœ°å®ŒæˆåŒ…çš„å‘å¸ƒè¿‡ç¨‹ã€‚</p><h3 id="å¦‚æœæˆ‘éœ€è¦å‘å¸ƒä¸€ä¸ª2-0-0-beta-2çš„ç‰ˆæœ¬-ä½¿ç”¨npå¦‚ä½•åšåˆ°" tabindex="-1">å¦‚æœæˆ‘éœ€è¦å‘å¸ƒä¸€ä¸ª2.0.0-beta.2çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨npå¦‚ä½•åšåˆ° <a class="header-anchor" href="#å¦‚æœæˆ‘éœ€è¦å‘å¸ƒä¸€ä¸ª2-0-0-beta-2çš„ç‰ˆæœ¬-ä½¿ç”¨npå¦‚ä½•åšåˆ°" aria-label="Permalink to &quot;å¦‚æœæˆ‘éœ€è¦å‘å¸ƒä¸€ä¸ª2.0.0-beta.2çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨npå¦‚ä½•åšåˆ°&quot;">â€‹</a></h3><p>è‹¥è¦ä½¿ç”¨ <code>np</code> å‘å¸ƒä¸€ä¸ªåä¸º <code>2.0.0-beta.2</code> çš„é¢„å‘å¸ƒç‰ˆæœ¬ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li><strong>æ›´æ–° package.json</strong>ï¼š é¦–å…ˆï¼Œç¡®ä¿åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>package.json</code> æ–‡ä»¶ä¸­ï¼Œå°† <code>version</code> å­—æ®µè®¾ç½®ä¸º <code>2.0.0-beta.2</code>ã€‚è¿™æ˜¯å‘Šè¯‰ npm ä½ æ‰“ç®—å‘å¸ƒçš„ç‰ˆæœ¬æ ‡è¯†ã€‚</li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#E06C75;">  &quot;name&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;">&quot;your-package-name&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#E06C75;">  &quot;version&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;">&quot;2.0.0-beta.2&quot;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // ... å…¶ä»–å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li><p><strong>æ¸…ç†å¹¶éªŒè¯é¡¹ç›®çŠ¶æ€</strong>ï¼š ç¡®ä¿ä½ çš„å·¥ä½œåŒºå¹²å‡€ï¼ˆæ²¡æœ‰æœªæäº¤çš„æ›´æ”¹ï¼‰ï¼Œä¸”å¤„äºæ­£ç¡®çš„å‘å¸ƒåˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ <code>master</code> æˆ– <code>main</code>ï¼‰ã€‚æ‰€æœ‰å¾…å‘å¸ƒçš„ä»£ç æ”¹åŠ¨å·²ç»æäº¤ï¼Œå¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</p></li><li><p><strong>è¿è¡Œ <code>np</code> å‘½ä»¤</strong>ï¼š æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œç„¶åè¿è¡Œ <code>np</code> å‘½ä»¤ã€‚<code>np</code> ä¼šè‡ªåŠ¨æ£€æµ‹é¡¹ç›®çŠ¶æ€ã€æ‰§è¡Œæµ‹è¯•ã€æ„å»ºç­‰é¢„å‘å¸ƒä»»åŠ¡ï¼Œå¹¶æœ€ç»ˆå‘å¸ƒåˆ° npm registryã€‚</p></li></ol><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> your-project-directory</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">np</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>np</code> ä¼šå¼•å¯¼ä½ å®Œæˆæ•´ä¸ªå‘å¸ƒæµç¨‹ï¼ŒåŒ…æ‹¬ç¡®è®¤ç‰ˆæœ¬ä¿¡æ¯ã€æ˜¯å¦æ‰§è¡Œæµ‹è¯•ã€æ˜¯å¦ç”Ÿæˆ changelog ç­‰ã€‚ç”±äºä½ å·²ç»åœ¨ <code>package.json</code> ä¸­æŒ‡å®šäº†é¢„å‘å¸ƒç‰ˆæœ¬å·ï¼Œ<code>np</code> åº”è¯¥ä¼šè¯†åˆ«å¹¶å°Šé‡è¿™ä¸ªè®¾å®šï¼Œç›´æ¥å‘å¸ƒ <code>2.0.0-beta.2</code> ç‰ˆæœ¬ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li>å¦‚æœä½ çš„é¡¹ç›®æœ‰ç‰¹æ®Šçš„å‘å¸ƒæµç¨‹éœ€æ±‚ï¼Œæ¯”å¦‚ç‰¹å®šçš„ç”Ÿå‘½å‘¨æœŸè„šæœ¬ã€é¢å¤–çš„å‘å¸ƒéªŒè¯ç­‰ï¼Œç¡®ä¿è¿™äº›å·²ç»åœ¨ <code>package.json</code> çš„ <code>scripts</code> å­—æ®µä¸­å®šä¹‰ï¼Œå¹¶ä¸”ä¸ <code>np</code> çš„å·¥ä½œæµç¨‹å…¼å®¹ã€‚</li><li>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨çš„æ˜¯ç§æœ‰ npm registry æˆ–éœ€è¦ç‰¹æ®Šçš„å‘å¸ƒé…ç½®ï¼Œç¡®ä¿åœ¨ <code>.npmrc</code> æ–‡ä»¶ä¸­æˆ–è€… <code>package.json</code> çš„ <code>publishConfig</code> å­—æ®µä¸­å·²ç»è®¾ç½®äº†æ­£ç¡®çš„ä¿¡æ¯ã€‚</li></ul><p><strong>é™„åŠ é€‰é¡¹</strong>ï¼š</p><ul><li>å¦‚æœä½ éœ€è¦è·³è¿‡æŸäº›é»˜è®¤æ­¥éª¤ï¼ˆå¦‚æµ‹è¯•æˆ–æäº¤ Gitï¼‰ï¼Œ<code>np</code> æä¾›äº†ä¸€äº›å‘½ä»¤è¡Œé€‰é¡¹æ¥å®šåˆ¶å‘å¸ƒæµç¨‹ã€‚æŸ¥é˜… <code>np</code> çš„å®˜æ–¹æ–‡æ¡£æˆ–é€šè¿‡ <code>np --help</code> æŸ¥çœ‹å¯ç”¨é€‰é¡¹ï¼Œæ ¹æ®éœ€è¦è°ƒæ•´å‘å¸ƒå‘½ä»¤ã€‚</li></ul><p>æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œåï¼Œä½ åº”è¯¥èƒ½å¤ŸæˆåŠŸä½¿ç”¨ <code>np</code> å‘å¸ƒç‰ˆæœ¬å·ä¸º <code>2.0.0-beta.2</code> çš„é¢„å‘å¸ƒç‰ˆæœ¬åˆ° npm registryã€‚è®°å¾—å¯†åˆ‡å…³æ³¨ <code>np</code> åœ¨å‘å¸ƒè¿‡ç¨‹ä¸­ç»™å‡ºçš„æç¤ºå’Œç¡®è®¤ä¿¡æ¯ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤ç¬¦åˆä½ çš„é¢„æœŸã€‚</p><ol><li><p><strong><code>np --no-cleanup --no-publish --no-release-draft</code></strong>ï¼š</p><ul><li>ä½¿ç”¨<code>np</code>å·¥å…·ï¼ˆå‡è®¾å·²ç»å…¨å±€æˆ–å±€éƒ¨å®‰è£…ï¼‰æ¥æ‰§è¡Œå‘å¸ƒå‰çš„å‡†å¤‡å·¥ä½œã€‚</li><li><code>--no-cleanup</code>ï¼šç¦ç”¨å‘å¸ƒå®Œæˆåæ¸…ç†ä¸´æ—¶æ–‡ä»¶çš„è¡Œä¸ºã€‚</li><li><code>--no-publish</code>ï¼šç¦æ­¢<code>np</code>åœ¨æœ€åä¸€æ­¥æ‰§è¡Œå®é™…çš„<code>npm publish</code>æ“ä½œï¼Œå³ä¸ç«‹å³å‘å¸ƒåˆ° npm registryã€‚</li><li><code>--no-release-draft</code>ï¼šä¸åˆ›å»º GitHub release draftï¼ˆå¦‚æœé¡¹ç›®ä¸ GitHub ä»“åº“å…³è”ï¼‰ã€‚è¿™ä¸€æ­¥é€šå¸¸æ¶‰åŠç”Ÿæˆ changelog å¹¶åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªå¾…å‘å¸ƒçš„ç‰ˆæœ¬è‰ç¨¿ã€‚</li></ul></li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>  &quot;prebuild&quot;: &quot;rimraf dist&quot;,</span></span>
<span class="line"><span>    &quot;prepare&quot;: &quot;npm run build&quot;,</span></span>
<span class="line"><span> &quot;release&quot;: &quot;np&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="æ‰‹å†™ä¸€ä¸ªrelease-ts" tabindex="-1">æ‰‹å†™ä¸€ä¸ªrelease.ts <a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ªrelease-ts" aria-label="Permalink to &quot;æ‰‹å†™ä¸€ä¸ªrelease.ts&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>/* eslint-disable  import/no-extraneous-dependencies,@typescript-eslint/camelcase, no-console */</span></span>
<span class="line"><span>import inquirer from &#39;inquirer&#39;;</span></span>
<span class="line"><span>import fs from &#39;fs&#39;;</span></span>
<span class="line"><span>import path from &#39;path&#39;;</span></span>
<span class="line"><span>import child_process from &#39;child_process&#39;;</span></span>
<span class="line"><span>import util from &#39;util&#39;;</span></span>
<span class="line"><span>import chalk from &#39;chalk&#39;;</span></span>
<span class="line"><span>import semverInc from &#39;semver/functions/inc&#39;;</span></span>
<span class="line"><span>import { ReleaseType } from &#39;semver&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import pkg from &#39;../package.json&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const exec = util.promisify(child_process.exec);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const run = async (command: string) =&gt; {</span></span>
<span class="line"><span>  console.log(chalk.green(command));</span></span>
<span class="line"><span>  await exec(command);</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const currentVersion = pkg.version;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const getNextVersions = (): { [key in ReleaseType]: string | null } =&gt; ({</span></span>
<span class="line"><span>  major: semverInc(currentVersion, &#39;major&#39;),</span></span>
<span class="line"><span>  minor: semverInc(currentVersion, &#39;minor&#39;),</span></span>
<span class="line"><span>  patch: semverInc(currentVersion, &#39;patch&#39;),</span></span>
<span class="line"><span>  premajor: semverInc(currentVersion, &#39;premajor&#39;),</span></span>
<span class="line"><span>  preminor: semverInc(currentVersion, &#39;preminor&#39;),</span></span>
<span class="line"><span>  prepatch: semverInc(currentVersion, &#39;prepatch&#39;),</span></span>
<span class="line"><span>  prerelease: semverInc(currentVersion, &#39;prerelease&#39;),</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const timeLog = (logInfo: string, type: &#39;start&#39; | &#39;end&#39;) =&gt; {</span></span>
<span class="line"><span>  let info = &#39;&#39;;</span></span>
<span class="line"><span>  if (type === &#39;start&#39;) {</span></span>
<span class="line"><span>    info = \`=&gt; å¼€å§‹ä»»åŠ¡ï¼š\${logInfo}\`;</span></span>
<span class="line"><span>  } else {</span></span>
<span class="line"><span>    info = \`âœ¨ ç»“æŸä»»åŠ¡ï¼š\${logInfo}\`;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  const nowDate = new Date();</span></span>
<span class="line"><span>  console.log(</span></span>
<span class="line"><span>    \`[\${nowDate.toLocaleString()}.\${nowDate</span></span>
<span class="line"><span>      .getMilliseconds()</span></span>
<span class="line"><span>      .toString()</span></span>
<span class="line"><span>      .padStart(3, &#39;0&#39;)}] \${info}</span></span>
<span class="line"><span>    \`,</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * è·å–ä¸‹ä¸€æ¬¡ç‰ˆæœ¬å·</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>async function prompt(): Promise&lt;string&gt; {</span></span>
<span class="line"><span>  const nextVersions = getNextVersions();</span></span>
<span class="line"><span>  const { nextVersion } = await inquirer.prompt([</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      type: &#39;list&#39;,</span></span>
<span class="line"><span>      name: &#39;nextVersion&#39;,</span></span>
<span class="line"><span>      message: \`è¯·é€‰æ‹©å°†è¦å‘å¸ƒçš„ç‰ˆæœ¬ (å½“å‰ç‰ˆæœ¬ \${currentVersion})\`,</span></span>
<span class="line"><span>      choices: (Object.keys(nextVersions) as Array&lt;ReleaseType&gt;).map(level =&gt; ({</span></span>
<span class="line"><span>        name: \`\${level} =&gt; \${nextVersions[level]}\`,</span></span>
<span class="line"><span>        value: nextVersions[level],</span></span>
<span class="line"><span>      })),</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>  ]);</span></span>
<span class="line"><span>  return nextVersion;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æ›´æ–°ç‰ˆæœ¬å·</span></span>
<span class="line"><span> * @param nextVersion æ–°ç‰ˆæœ¬å·</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>async function updateVersion(nextVersion: string) {</span></span>
<span class="line"><span>  pkg.version = nextVersion;</span></span>
<span class="line"><span>  timeLog(&#39;ä¿®æ”¹package.jsonç‰ˆæœ¬å·&#39;, &#39;start&#39;);</span></span>
<span class="line"><span>  await fs.writeFileSync(path.resolve(__dirname, &#39;./../package.json&#39;), JSON.stringify(pkg));</span></span>
<span class="line"><span>  await run(&#39;npx prettier package.json --write&#39;);</span></span>
<span class="line"><span>  timeLog(&#39;ä¿®æ”¹package.jsonç‰ˆæœ¬å·&#39;, &#39;end&#39;);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>async function generateChangelog() {</span></span>
<span class="line"><span>  timeLog(&#39;ç”ŸæˆCHANGELOG.md&#39;, &#39;start&#39;);</span></span>
<span class="line"><span>  await run(&#39; npx conventional-changelog -p angular -i CHANGELOG.md -s -r 0&#39;);</span></span>
<span class="line"><span>  timeLog(&#39;ç”ŸæˆCHANGELOG.md&#39;, &#39;end&#39;);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å°†ä»£ç æäº¤è‡³git</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>async function push(nextVersion: string) {</span></span>
<span class="line"><span>  timeLog(&#39;æ¨é€ä»£ç è‡³gitä»“åº“&#39;, &#39;start&#39;);</span></span>
<span class="line"><span>  await run(&#39;git add package.json CHANGELOG.md&#39;);</span></span>
<span class="line"><span>  await run(\`git commit -m &quot;v\${nextVersion}&quot; -n\`);</span></span>
<span class="line"><span>  await run(&#39;git push&#39;);</span></span>
<span class="line"><span>  timeLog(&#39;æ¨é€ä»£ç è‡³gitä»“åº“&#39;, &#39;end&#39;);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ç»„ä»¶åº“æ‰“åŒ…</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>async function build() {</span></span>
<span class="line"><span>  timeLog(&#39;ç»„ä»¶åº“æ‰“åŒ…&#39;, &#39;start&#39;);</span></span>
<span class="line"><span>  await run(&#39;npm run build&#39;);</span></span>
<span class="line"><span>  timeLog(&#39;ç»„ä»¶åº“æ‰“åŒ…&#39;, &#39;end&#39;);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å‘å¸ƒè‡³npm</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>async function publish() {</span></span>
<span class="line"><span>  timeLog(&#39;å‘å¸ƒç»„ä»¶åº“&#39;, &#39;start&#39;);</span></span>
<span class="line"><span>  await run(&#39;npm publish&#39;);</span></span>
<span class="line"><span>  timeLog(&#39;å‘å¸ƒç»„ä»¶åº“&#39;, &#39;end&#39;);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æ‰“tagæäº¤è‡³git</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>async function tag(nextVersion: string) {</span></span>
<span class="line"><span>  timeLog(&#39;æ‰“tagå¹¶æ¨é€è‡³git&#39;, &#39;start&#39;);</span></span>
<span class="line"><span>  await run(\`git tag v\${nextVersion}\`);</span></span>
<span class="line"><span>  await run(\`git push origin tag v\${nextVersion}\`);</span></span>
<span class="line"><span>  timeLog(&#39;æ‰“tagå¹¶æ¨é€è‡³git&#39;, &#39;end&#39;);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>async function main() {</span></span>
<span class="line"><span>  try {</span></span>
<span class="line"><span>    const nextVersion = await prompt();</span></span>
<span class="line"><span>    const startTime = Date.now();</span></span>
<span class="line"><span>    // =================== æ›´æ–°ç‰ˆæœ¬å· ===================</span></span>
<span class="line"><span>    await updateVersion(nextVersion);</span></span>
<span class="line"><span>    // =================== æ›´æ–°changelog ===================</span></span>
<span class="line"><span>    await generateChangelog();</span></span>
<span class="line"><span>    // =================== ä»£ç æ¨é€gitä»“åº“ ===================</span></span>
<span class="line"><span>    await push(nextVersion);</span></span>
<span class="line"><span>    // =================== ç»„ä»¶åº“æ‰“åŒ… ===================</span></span>
<span class="line"><span>    await build();</span></span>
<span class="line"><span>    // =================== å‘å¸ƒè‡³npm ===================</span></span>
<span class="line"><span>    await publish();</span></span>
<span class="line"><span>    // =================== æ‰“tagå¹¶æ¨é€è‡³git ===================</span></span>
<span class="line"><span>    await tag(nextVersion);</span></span>
<span class="line"><span>    console.log(\`âœ¨ å‘å¸ƒæµç¨‹ç»“æŸ å…±è€—æ—¶\${((Date.now() - startTime) / 1000).toFixed(3)}s\`);</span></span>
<span class="line"><span>  } catch (error) {</span></span>
<span class="line"><span>    console.log(&#39;ğŸ’£ å‘å¸ƒå¤±è´¥ï¼Œå¤±è´¥åŸå› ï¼š&#39;, error);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>main();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br></div></div><p><a href="https://cloud.tencent.com/developer/article/1810012" target="_blank" rel="noreferrer">https://cloud.tencent.com/developer/article/1810012</a></p><h1 id="git-chglog" tabindex="-1">git-chglog <a class="header-anchor" href="#git-chglog" aria-label="Permalink to &quot;git-chglog&quot;">â€‹</a></h1><p>&quot;chglog&quot;: &quot;git-chglog -o CHANGELOG.md&quot;,</p><h1 id="bundlesize" tabindex="-1">bundlesize <a class="header-anchor" href="#bundlesize" aria-label="Permalink to &quot;bundlesize&quot;">â€‹</a></h1><p>&quot;bundle-check&quot;: &quot;bundlesize&quot;,</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>&quot;bundlesize&quot;: [</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&quot;path&quot;: &quot;./dist/index.js&quot;,</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&quot;maxSize&quot;: &quot;20 kB&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>],</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="contributors" tabindex="-1">Contributors <a class="header-anchor" href="#contributors" aria-label="Permalink to &quot;Contributors&quot;">â€‹</a></h2>`,67);function d(m,h,g,k,v,q){const s=p,a=l,e=i;return t(),c("div",null,[u,n(s,{readTime:"10",words:"2.7k"}),n(a),n(e)])}const j=r(b,[["render",d]]);export{C as __pageData,j as default};
