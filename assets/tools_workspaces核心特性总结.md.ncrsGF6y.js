import{_ as n,a as p,b as l}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.BCVHfIj7.js";import{_ as t,c as h,I as s,a7 as r,o as d}from"./chunks/framework.DGCt2JJv.js";import"./chunks/dayjs.min.DZyl58SH.js";const k="/long-press/assets/workspaces%E5%AE%9E%E8%B7%B5.DX4IvUXK.png",o="/long-press/assets/lerna.BRGv6wI8.png",w=JSON.parse('{"title":"npm workspaces 和 lerna 核心特性总结","description":"","frontmatter":{},"headers":[],"relativePath":"tools/workspaces核心特性总结.md","filePath":"tools/workspaces核心特性总结.md","lastUpdated":1708876908000}'),c={name:"tools/workspaces核心特性总结.md"},b=r('<h1 id="npm-workspaces-和-lerna-核心特性总结" tabindex="-1">npm workspaces 和 lerna 核心特性总结 <a class="header-anchor" href="#npm-workspaces-和-lerna-核心特性总结" aria-label="Permalink to &quot;npm workspaces 和 lerna 核心特性总结&quot;">​</a></h1><p><img src="'+k+`" alt="workspaces实践"></p><h2 id="npm-workspaces" tabindex="-1">npm workspaces <a class="header-anchor" href="#npm-workspaces" aria-label="Permalink to &quot;npm workspaces&quot;">​</a></h2><h3 id="创建项目" tabindex="-1">创建项目 <a class="header-anchor" href="#创建项目" aria-label="Permalink to &quot;创建项目&quot;">​</a></h3><p>创建命令：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> --workspace</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> a</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> -w</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> a</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>项目创建后，会在项目顶级目录下创建 node_modules 并存储所有 package 的依赖：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">node_modules</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> @samtestgroup</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">│</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;">   ├──</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> imooc-test-a</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;"> -&gt; </span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;">../../a</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">│</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;">   └──</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> imooc-test-cli</span><span style="--shiki-light:#000000;--shiki-dark:#ABB2BF;"> -&gt; </span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;">../../cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="安装依赖或更新依赖" tabindex="-1">安装依赖或更新依赖 <a class="header-anchor" href="#安装依赖或更新依赖" aria-label="Permalink to &quot;安装依赖或更新依赖&quot;">​</a></h3><p>为某个特定的 workspace 安装依赖</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> chalk</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> -w</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> a</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> @samtestgroup/imooc-test-a</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> -w</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>当修改了 package 的内容后（如：package.json 中的 name）</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> --workspaces</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> -ws</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>-ws 会更新所有 workspace 的依赖</p><h3 id="发布项目" tabindex="-1">发布项目 <a class="header-anchor" href="#发布项目" aria-label="Permalink to &quot;发布项目&quot;">​</a></h3><p>发布全部项目：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> publish</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> -ws</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="lerna" tabindex="-1">lerna <a class="header-anchor" href="#lerna" aria-label="Permalink to &quot;lerna&quot;">​</a></h2><h3 id="初始化项目" tabindex="-1">初始化项目 <a class="header-anchor" href="#初始化项目" aria-label="Permalink to &quot;初始化项目&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="添加子项目" tabindex="-1">添加子项目 <a class="header-anchor" href="#添加子项目" aria-label="Permalink to &quot;添加子项目&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> a</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>更多特性：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> cli</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> --access</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> public</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> --bin</span><span style="--shiki-light:#0000FF;--shiki-dark:#D19A66;"> --es-module</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="添加依赖" tabindex="-1">添加依赖 <a class="header-anchor" href="#添加依赖" aria-label="Permalink to &quot;添加依赖&quot;">​</a></h3><p>安装依赖</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> chalk</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> packages/a</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> @samtestgroup/lerna-test-a</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> packages/cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>更新依赖</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> bootstrap</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="自动化测试" tabindex="-1">自动化测试 <a class="header-anchor" href="#自动化测试" aria-label="Permalink to &quot;自动化测试&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="项目发布" tabindex="-1">项目发布 <a class="header-anchor" href="#项目发布" aria-label="Permalink to &quot;项目发布&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#61AFEF;">npx</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> lerna</span><span style="--shiki-light:#A31515;--shiki-dark:#98C379;"> publish</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="lerna-执行流程" tabindex="-1">lerna 执行流程 <a class="header-anchor" href="#lerna-执行流程" aria-label="Permalink to &quot;lerna 执行流程&quot;">​</a></h2><p><img src="`+o+'" alt="lerna"></p><h2 id="contributors" tabindex="-1">Contributors <a class="header-anchor" href="#contributors" aria-label="Permalink to &quot;Contributors&quot;">​</a></h2>',42);function u(m,g,v,y,C,A){const a=n,i=p,e=l;return d(),h("div",null,[b,s(a,{readTime:"1",words:"271"}),s(i),s(e)])}const x=t(c,[["render",u]]);export{w as __pageData,x as default};
