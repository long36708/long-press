import{_ as t,a as o,b as p}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.BCVHfIj7.js";import{_ as i,c as l,I as s,a7 as r,o as u}from"./chunks/framework.DGCt2JJv.js";import"./chunks/dayjs.min.DZyl58SH.js";const x=JSON.parse('{"title":"自动版本管理和生成CHANGELOG","description":"","frontmatter":{},"headers":[],"relativePath":"tools/自动版本管理和生成CHANGELOG.md","filePath":"tools/自动版本管理和生成CHANGELOG.md","lastUpdated":1711902617000}'),c={name:"tools/自动版本管理和生成CHANGELOG.md"},d=r(`<h1 id="自动版本管理和生成changelog" tabindex="-1">自动版本管理和生成CHANGELOG <a class="header-anchor" href="#自动版本管理和生成changelog" aria-label="Permalink to &quot;自动版本管理和生成CHANGELOG&quot;">​</a></h1><h2 id="standard-version-介绍" tabindex="-1">standard-version 介绍 <a class="header-anchor" href="#standard-version-介绍" aria-label="Permalink to &quot;standard-version 介绍&quot;">​</a></h2><p>一个用于生成<code>CHANGELOG.md</code>和进行<code>SemVer(语义化版本号)</code>发版的命令行工具； 主要功能：</p><ul><li>自动修改最新版本号，可以是<code>package.json</code>或者自定义一个文件</li><li>读取最新版本号，创建一个最新的<code>git tag</code></li><li>根据提交信息，生成<code>CHANGELOG.md</code></li><li>创建一个新提交包括<code>CHANGELOG.md</code>和<code>package.json</code></li></ul><p>官方文档： <a href="http://www.npmdoc.org/standard-versionzhongwenwendangstandard-version-jszhongwenjiaochengjiexi.html" target="_blank" rel="noreferrer">http://www.npmdoc.org/standard-versionzhongwenwendangstandard-version-jszhongwenjiaochengjiexi.html</a> standard-version 是帮助项目自动生成ChangeLog、升版本、打tag的工具，</p><p>在package.json 文件中添加脚本命令如下</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>  &quot;scripts&quot;: {</span></span>
<span class="line"><span>    &quot;release&quot;: &quot;standard-version&quot;</span></span>
<span class="line"><span>  },</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>那么在命令行执行 yarn release 时它会：</p><ul><li>取得当前版本（比如package.json里面的version字段），升版本：<code>1.0.0 =&gt; 1.1.0</code> 或者 <code>1.0.0 =&gt; 2.0.0</code>等（如何升级可以由参数控制）</li><li>基于commits生成ChangeLog文件</li><li>提交一个commit，包含ChangeLog和版本变更的文件</li><li>打tag</li></ul><h2 id="changelog-md-配置" tabindex="-1">CHANGELOG.md 配置 <a class="header-anchor" href="#changelog-md-配置" aria-label="Permalink to &quot;CHANGELOG.md 配置&quot;">​</a></h2><p>standard-verstion 生成的CHANGELOG只会包含feat,fix,BREACK-CHANGE类型的提交记录， 如果想记录其他类型的提交，需要根目录下创建一个名为 .versionrc 的文件。代码如下：</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>// .versionrc</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      &quot;types&quot;: [</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;chore&quot;, &quot;section&quot;:&quot;Others&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;revert&quot;, &quot;section&quot;:&quot;Reverts&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;feat&quot;, &quot;section&quot;: &quot;Features&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;fix&quot;, &quot;section&quot;: &quot;Bug Fixes&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;improvement&quot;, &quot;section&quot;: &quot;Feature Improvements&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;docs&quot;, &quot;section&quot;:&quot;Docs&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;style&quot;, &quot;section&quot;:&quot;Styling&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;refactor&quot;, &quot;section&quot;:&quot;Code Refactoring&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;perf&quot;, &quot;section&quot;:&quot;Performance Improvements&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;test&quot;, &quot;section&quot;:&quot;Tests&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;build&quot;, &quot;section&quot;:&quot;Build System&quot;, &quot;hidden&quot;: false},</span></span>
<span class="line"><span>        {&quot;type&quot;: &quot;ci&quot;, &quot;section&quot;:&quot;CI&quot;, &quot;hidden&quot;:false}</span></span>
<span class="line"><span>      ]</span></span>
<span class="line"><span>    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>说明：</p><ul><li><code>type&quot;</code> commit 类型</li><li><code>&quot;section&quot;</code> 不同的 commit 类型所在<em>CHANGELOG.md</em>中的区域</li><li><code>&quot;hidden&quot;</code> 是否在<em>CHANGELOG.md</em>中显示</li></ul><h2 id="语义化版本控制-semver" tabindex="-1">语义化版本控制(SemVer) <a class="header-anchor" href="#语义化版本控制-semver" aria-label="Permalink to &quot;语义化版本控制(SemVer)&quot;">​</a></h2><p>语义化的版本控制是由GitHub发起的一份用于规范版本号递增的规则；</p><h3 id="版本格式" tabindex="-1">版本格式 <a class="header-anchor" href="#版本格式" aria-label="Permalink to &quot;版本格式&quot;">​</a></h3><p>主版本号.次版本号.修订号，版本号递增规则如下：</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>-   主版本号(major)：当你做了不兼容的 API 修改，</span></span>
<span class="line"><span>-   次版本号(minor)：当你做了向下兼容的功能性新增，可以理解为Feature版本，</span></span>
<span class="line"><span>-   修订号(patch)：当你做了向下兼容的问题修正，可以理解为Bug fix版本。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>先行版本号可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</p><h3 id="先行版本" tabindex="-1">先行版本 <a class="header-anchor" href="#先行版本" aria-label="Permalink to &quot;先行版本&quot;">​</a></h3><p>当即将发布大版本改动前，但是又不能保证这个版本的功能 100% 正常，这个时候可以发布先行版本：</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>-   alpha: 内部版本</span></span>
<span class="line"><span>-   beta: 公测版本</span></span>
<span class="line"><span>-   rc: 候选版本(Release candiate)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>比如：1.0.0-alpha.0,1.0.0-alpha.1,1.0.0-rc.0,1.0.0-rc.1等。</p><p>standard-version 会根据提交的信息类型来自动更改对应的版本号,如下:</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes light-plus one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>-   feat: 次版本(minor)+1</span></span>
<span class="line"><span>-   fix: 修订号(patch) +1</span></span>
<span class="line"><span>-   BREAK CHANGE: 主板号(marjor) +1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="contributors" tabindex="-1">Contributors <a class="header-anchor" href="#contributors" aria-label="Permalink to &quot;Contributors&quot;">​</a></h2>`,27);function q(m,h,b,g,v,_){const a=t,n=o,e=p;return u(),l("div",null,[d,s(a,{readTime:"2",words:"705"}),s(n),s(e)])}const k=i(c,[["render",q]]);export{x as __pageData,k as default};
